<section class="section has-text-centered has-text-white has-background-dark">
    <p class="is-size-3 mx-3">
        Account
    </p>

    <div *ngIf="currentUser; else loggedOut">
        <div class="is-size-5">
            Username:
            <div class="is-size-6 is-family-code mb-2">
                {{ currentUser.username }}
            </div>
            <div *ngIf="showUsernameUpdate" class="is-size-6">
                <form class="update-username has-text-centered" method="POST" #updateusernameForm="ngForm" (ngSubmit)="submitUpdateUsername($event)">
                    <div class="field">
                        <p class="control has-icons-left">
                            <input class="input form-control is-small" type="text" name="nUsername" id="nUsername"
                            placeholder="New Username" [(ngModel)]="nUsername" #nUsernameInput="ngModel" required>
                            <span class="icon is-small is-left">
                                <i class="fa fa-check"></i>
                            </span>
                        </p>
                        <div class="help is-error" *ngIf="nUsernameInput.invalid && nUsernameInput.touched">
                            Username is required!
                        </div>
                    </div>
                    <div class="field">
                        <p class="control">
                            <button class="button is-primary is-rounded is-small" type="submit" [disabled]="nUsernameInput.invalid">
                                <span class="icon">
                                    <i class="fa fa-sign-in"></i>
                                </span>
                                <span>Confirm</span>
                            </button>
                        </p>
                    </div>
                </form>
            </div>

            <div *ngIf="!showUsernameUpdate">
                <button class="button is-inverted is-rounded is-outlined is-small" (click)="toggleUsernameEdit()">
                    <span class="icon">
                        <i class="fa fa-edit"></i>
                    </span>
                    <span>Edit</span>
                </button>
            </div>
        </div>
    </div>
    
    <div class="mt-3">
        <div class="is-size-5">
            Email:
            <div class="is-size-6 mb-2 is-family-code">
                {{ Email }}
            </div>
            <div *ngIf="showEmailUpdate" class="is-size-6">
                <form class="update-email has-text-centered" method="POST" #updateemailForm="ngForm" (ngSubmit)="submitUpdateEmail($event)">
                    <div class="field">
                        <p class="control has-icons-left">
                            <input class="input form-control is-small" type="text" name="nEmail" id="nEmail"
                            placeholder="New Email" [(ngModel)]="nEmail" email #nEmailInput="ngModel" required>
                            <span class="icon is-small is-left">
                                <i class="fa fa-check"></i>
                            </span>
                        </p>
                        <div class="has-text-centered help is-error" *ngIf="nEmailInput.errors?.email"> Invalid Email </div>
                        <div class="help is-error" *ngIf="nEmailInput.invalid && nEmailInput.touched">
                            Email is required!
                        </div>
                    </div>
                    <div class="field">
                        <p class="control">
                            <button class="button is-primary is-rounded is-small" type="submit" [disabled]="nEmailInput.invalid">
                                <span class="icon">
                                    <i class="fa fa-sign-in"></i>
                                </span>
                                <span>Confirm</span>
                            </button>
                        </p>
                    </div>
                </form>
            </div>

        </div> 
        
        <div *ngIf="!showEmailUpdate">
            <button class="button is-inverted is-rounded is-outlined is-small" (click)="toggleEmailEdit()">
                <span class="icon">
                    <i class="fa fa-edit"></i>
                </span>
                <span>Edit</span>
            </button>
        </div>
    </div>


    <div class="mt-3">
        <div class="is-size-5">
            Favorites:
        </div>

        <div class="has-text-centered is-family-code is-size-6">
            You can add maps to your favorites on the home screen
            <p><a class="button is-small is-primary" routerLink="/">
                <span class="icon">
                    <i class="fa fa-home"></i>
                </span>
                <span>Home</span>
            </a></p>
        </div>

        <div class="is=size-6 mt-3">
            <div class="columns px-6 is-gapless">
                <div class="column" *ngIf="showFactory">
                    <p class="is-size-6 is-family-code">Factory</p>
                    <img src="assets/images/Factory-Day_Banner.png" alt="Factory">
                    <p><a class="button is-danger is-small mt-2" (click)="removeFactory()">
                        <span class="icon">
                            <i class="fa fa-remove"></i>
                        </span>
                        <span>Remove</span>
                    </a></p>
                </div>
                <div class="column" *ngIf="showCustoms">
                    <p class="is-size-6 is-family-code">Customs</p>
                    <img src="assets/images/Customs_Banner.png" alt="Customes">
                    <p><a class="button is-danger is-small mt-2" (click)="removeCustoms()">
                        <span class="icon">
                            <i class="fa fa-remove"></i>
                        </span>
                        <span>Remove</span>
                    </a></p>
                </div>
                <div class="column" *ngIf="showWoods">
                    <p class="is-size-6 is-family-code">Woods</p>
                    <img src="assets/images/Banner_woods.png" alt="Woods">
                    <p><a class="button is-danger is-small mt-2" (click)="removeWoods()">
                        <span class="icon">
                            <i class="fa fa-remove"></i>
                        </span>
                        <span>Remove</span>
                    </a></p>
                </div>
                <div class="column" *ngIf="showInterchange">
                    <p class="is-size-6 is-family-code">Interchange</p>
                    <img src="assets/images/Banner_interchange.png" alt="Interchange">
                    <p><a class="button is-danger is-small mt-2" (click)="removeInterchange()">
                        <span class="icon">
                            <i class="fa fa-remove"></i>
                        </span>
                        <span>Remove</span>
                    </a></p>
                </div>
                <div class="column" *ngIf="showLabs">
                    <p class="is-size-6 is-family-code">Labs</p>
                    <img src="assets/images/TheLabBanner.png" alt="Labs">
                    <p><a class="button is-danger is-small mt-2" (click)="removeFactory()">
                        <span class="icon">
                            <i class="fa fa-remove"></i>
                        </span>
                        <span>Remove</span>
                    </a></p>
                </div>
                <div class="column" *ngIf="showReserve">
                    <p class="is-size-6 is-family-code">Reserve</p>
                    <img src="assets/images/Reserve.png" alt="Reserve">
                    <p><a class="button is-danger is-small mt-2" (click)="removeFactory()">
                        <span class="icon">
                            <i class="fa fa-remove"></i>
                        </span>
                        <span>Remove</span>
                    </a></p>
                </div>
                <div class="column" *ngIf="showShoreline">
                    <p class="is-size-6 is-family-code">Shoreline</p>
                    <img src="assets/images/Banner_shoreline.png" alt="Shoreline">
                    <p><a class="button is-danger is-small mt-2" (click)="removeFactory()">
                        <span class="icon">
                            <i class="fa fa-remove"></i>
                        </span>
                        <span>Remove</span>
                    </a></p>
                </div>
            </div>
        </div>
    </div>

    <div class="has-text-centered mt-4 is-size-5">
        Spin Counter:
        <div class="is-size-5">
            {{ numberOfSpins }}
        </div>
    </div>

    <div class="is-text-centered mt-4 is-size-5">
        You've randomly selected 
    </div>
    <div class="columns is-gapless is-mobile is-family-code mt-4">
        <div class="column">
            <div class="has-background-grey-lighter mx-3 has-text-black">
                <p><b>Factory</b></p>
                {{ numberOfFactory }}
            </div>
        </div>
        <div class="column">
            <div class="has-background-grey-lighter mx-3 has-text-black">
                <p><b>Woods</b></p>
                {{ numberOfWoods }}
            </div>
        </div>
        <div class="column">
            <div class="has-background-grey-lighter mx-3 has-text-black">
                 <p><b>Customs</b></p>
                 {{ numberOfCustoms }}
            </div>
        </div>
        <div class="column">
            <div class="has-background-grey-lighter mx-3 has-text-black">
                <p><b>Interchange</b></p>
                {{ numberOfInterchange }}
            </div>
        </div>
        <div class="column">
            <div class="has-background-grey-lighter mx-3 has-text-black">
                <p><b>Reserve</b></p>
                {{ numberOfReserve }}
            </div>
        </div>
        <div class="column">
            <div class="has-background-grey-lighter mx-3 has-text-black">
                <p><b>Shoreline</b></p>
                {{ numberOfShoreline }}
            </div>
        </div>
        <div class="column">
            <div class="has-background-grey-lighter mx-3 has-text-black">
                <p><b>Labs</b></p>
                {{ numberOfLab }}
            </div>
        </div>
    </div>
</section>

<ng-template #loggedOut>
    Please login.
</ng-template>